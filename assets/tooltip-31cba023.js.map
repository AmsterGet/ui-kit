{"version":3,"file":"tooltip-31cba023.js","sources":["../../src/components/tooltip/tooltip.tsx"],"sourcesContent":["/*\n * Copyright 2024 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FC, ReactElement, useRef, useState, ReactNode } from 'react';\nimport classNames from 'classnames/bind';\nimport { useFloating, flip, Placement } from '@floating-ui/react-dom';\nimport styles from './tooltip.module.scss';\n\nconst cx = classNames.bind(styles);\nconst TOOLTIP_DELAY_MS = 2000;\nconst SAFE_ZONE = 100;\n\ninterface TooltipProps {\n  content: ReactNode;\n  children: ReactNode;\n  className?: string;\n  dynamicWidth?: boolean;\n  width?: number;\n  placement?: Placement;\n  dataAutomationId?: string;\n}\n\nexport const Tooltip: FC<TooltipProps> = ({\n  content,\n  className,\n  dynamicWidth,\n  width,\n  placement = 'bottom',\n  dataAutomationId,\n  children,\n}): ReactElement => {\n  const [isOpened, setOpened] = useState(false);\n  const timeoutId = useRef<ReturnType<typeof setTimeout>>();\n\n  const { refs, floatingStyles } = useFloating({\n    placement,\n    strategy: 'fixed',\n    middleware: [\n      flip({\n        fallbackPlacements: ['bottom', 'top', 'right', 'left'],\n      }),\n    ],\n  });\n\n  const styleWidth = dynamicWidth ? null : { width: `${width}px` };\n  const clientWidth = document.documentElement.clientWidth;\n  const maxWidth = !styleWidth ? clientWidth - SAFE_ZONE : styleWidth;\n\n  const handleHideTooltip = () => {\n    if (timeoutId.current) {\n      clearTimeout(timeoutId.current);\n    }\n\n    setOpened(false);\n  };\n\n  const handleShowTooltip = () => {\n    timeoutId.current = setTimeout(() => setOpened(true), TOOLTIP_DELAY_MS);\n  };\n\n  return (\n    <>\n      <div\n        ref={(node) => refs.setReference(node as HTMLElement)}\n        className={cx('tooltip-wrapper', className)}\n        onMouseDown={handleHideTooltip}\n        onMouseEnter={handleShowTooltip}\n        onMouseLeave={handleHideTooltip}\n      >\n        {children}\n      </div>\n      {isOpened && (\n        <div\n          className={cx('tooltip')}\n          ref={(node) => refs.setFloating(node as HTMLElement)}\n          style={{\n            ...floatingStyles,\n            ...styleWidth,\n          }}\n          data-automation-id={dataAutomationId}\n        >\n          <div\n            className={cx('tooltip-content')}\n            style={{\n              maxWidth: `${maxWidth}px`,\n            }}\n          >\n            {content}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n"],"names":["cx","classNames","styles","TOOLTIP_DELAY_MS","SAFE_ZONE","Tooltip","content","className","dynamicWidth","width","placement","dataAutomationId","children","isOpened","setOpened","useState","timeoutId","useRef","refs","floatingStyles","useFloating","flip","styleWidth","clientWidth","maxWidth","handleHideTooltip","handleShowTooltip","jsxs","Fragment","jsx","node"],"mappings":"mUAqBAA,EAAAC,EAAA,KAAAC,CAAA,EACAC,EAAA,IACAC,EAAA,IAYOC,EAAA,CAAA,CAAmC,QAAAC,EACxC,UAAAC,EACA,aAAAC,EACA,MAAAC,EACA,UAAAC,EAAA,SACY,iBAAAC,EACZ,SAAAC,CAEF,IAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACAC,EAAAC,EAAAA,SAEA,CAAA,KAAAC,EAAA,eAAAC,CAAA,EAAAC,EAAA,CAA6C,UAAAV,EAC3C,SAAA,QACU,WAAA,CACEW,EAAA,CACL,mBAAA,CAAA,SAAA,MAAA,QAAA,MAAA,CACkD,CAAA,CACtD,CACH,CAAA,EAGFC,EAAAd,EAAA,KAAA,CAAA,MAAA,GAAAC,CAAA,MACAc,EAAA,SAAA,gBAAA,YACAC,EAAAF,GAAAC,EAAAnB,EAEAqB,EAAA,IAAA,CACET,EAAA,SACE,aAAAA,EAAA,OAAA,EAGFF,EAAA,EAAA,CAAe,EAGjBY,EAAA,IAAA,CACEV,EAAA,QAAA,WAAA,IAAAF,EAAA,EAAA,EAAAX,CAAA,CAAsE,EAGxE,OAAAwB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEIC,EAAA,IAAA,MAAC,CAAA,IAAAC,GAAAZ,EAAA,aAAAY,CAAA,EACqD,UAAA9B,EAAA,kBAAAO,CAAA,EACV,YAAAkB,EAC7B,aAAAC,EACC,aAAAD,EACA,SAAAb,CAEb,CAAA,EACHC,GAAAgB,EAAA,IAEE,MAAC,CAAA,UAAA7B,EAAA,SAAA,EACwB,IAAA8B,GAAAZ,EAAA,YAAAY,CAAA,EAC4B,MAAA,CAC5C,GAAAX,EACF,GAAAG,CACA,EACL,qBAAAX,EACoB,SAAAkB,EAAA,IAEpB,MAAC,CAAA,UAAA7B,EAAA,iBAAA,EACgC,MAAA,CACxB,SAAA,GAAAwB,CAAA,IACgB,EACvB,SAAAlB,CAEC,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CAIR"}