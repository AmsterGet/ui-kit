import{r as u,a as rt}from"./index-c6dae603.js";import{i as ot,c as ie,p as it,d as W,g as be,u as st,e as Ue,h as ke,j as at,k as ut}from"./floating-ui.react-dom-85de2e36.js";import"./index-c81abf54.js";function z(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function V(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&ot(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function lt(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function Ye(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function ct(t){return t.mozInputSource===0&&t.isTrusted?!0:we()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function ft(t){return pt()?!1:!we()&&t.width===0&&t.height===0||we()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function dt(){return/apple/i.test(navigator.vendor)}function we(){const t=/android/i;return t.test(lt())||t.test(Ye())}function pt(){return Ye().includes("jsdom/")}function Pe(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function vt(t){return"nativeEvent"in t}function bt(t){return t.matches("html,body")}function U(t){return(t==null?void 0:t.ownerDocument)||document}function ge(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function ee(t){return"composedPath"in t?t.composedPath()[0]:t.target}const gt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function je(t){return ie(t)&&t.matches(gt)}function me(t){t.preventDefault(),t.stopPropagation()}function mt(t){return t?t.getAttribute("role")==="combobox"&&je(t):!1}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ht=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],le=ht.join(","),Xe=typeof Element>"u",ne=Xe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ce=!Xe&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},fe=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},yt=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Et=function(e,n,r){if(fe(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(le));return n&&ne.call(e,le)&&o.unshift(e),o=o.filter(r),o},Rt=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!fe(i,!1))if(i.tagName==="SLOT"){var l=i.assignedElements(),c=l.length?l:i.children,v=t(c,!0,r);r.flatten?o.push.apply(o,v):o.push({scopeParent:i,candidates:v})}else{var p=ne.call(i,le);p&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var d=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),m=!fe(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(d&&m){var a=t(d===!0?i.children:d.children,!0,r);r.flatten?o.push.apply(o,a):o.push({scopeParent:i,candidates:a})}else s.unshift.apply(s,i.children)}}return o},Ge=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ze=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||yt(e))&&!Ge(e)?0:e.tabIndex},wt=function(e,n){var r=Ze(e);return r<0&&n&&!Ge(e)?0:r},xt=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Je=function(e){return e.tagName==="INPUT"},Tt=function(e){return Je(e)&&e.type==="hidden"},St=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Ct=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},It=function(e){if(!e.name)return!0;var n=e.form||ce(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=Ct(o,e.form);return!s||s===e},kt=function(e){return Je(e)&&e.type==="radio"},Pt=function(e){return kt(e)&&!It(e)},At=function(e){var n,r=e&&ce(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,l,c;for(s=!!((i=o)!==null&&i!==void 0&&(l=i.ownerDocument)!==null&&l!==void 0&&l.contains(o)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&o;){var v,p,d;r=ce(o),o=(v=r)===null||v===void 0?void 0:v.host,s=!!((p=o)!==null&&p!==void 0&&(d=p.ownerDocument)!==null&&d!==void 0&&d.contains(o))}}return s},Ae=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Ot=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ne.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(ne.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var l=e;e;){var c=e.parentElement,v=ce(e);if(c&&!c.shadowRoot&&o(c)===!0)return Ae(e);e.assignedSlot?e=e.assignedSlot:!c&&v!==e.ownerDocument?e=v.host:e=c}e=l}if(At(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ae(e);return!1},Dt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ne.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},Ft=function(e,n){return!(n.disabled||fe(n)||Tt(n)||Ot(n,e)||St(n)||Dt(n))},xe=function(e,n){return!(Pt(n)||Ze(n)<0||!Ft(e,n))},Nt=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Mt=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,l=i?o.scopeParent:o,c=wt(l,i),v=i?t(o.candidates):l;c===0?i?n.push.apply(n,v):n.push(l):r.push({documentOrder:s,tabIndex:c,item:o,isScope:i,content:v})}),r.sort(xt).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},Te=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Rt([e],n.includeContainer,{filter:xe.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Nt}):r=Et(e,n.includeContainer,xe.bind(null,n)),Mt(r)},Lt=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ne.call(e,le)===!1?!1:xe(n,e)};const Qe={...rt},_t=Qe.useInsertionEffect,Kt=_t||(t=>t());function te(t){const e=u.useRef(()=>{});return Kt(()=>{e.current=t}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}let Oe=0;function Z(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=e;r&&cancelAnimationFrame(Oe);const s=()=>t==null?void 0:t.focus({preventScroll:n});o?s():Oe=requestAnimationFrame(s)}var Y=typeof document<"u"?u.useLayoutEffect:u.useEffect;function se(){return se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},se.apply(this,arguments)}let De=!1,$t=0;const Fe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+$t++;function Bt(){const[t,e]=u.useState(()=>De?Fe():void 0);return Y(()=>{t==null&&e(Fe())},[]),u.useEffect(()=>{De=!0},[]),t}const Vt=Qe.useId,Se=Vt||Bt,ln=u.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:s}},width:i=14,height:l=7,tipRadius:c=0,strokeWidth:v=0,staticOffset:p,stroke:d,d:m,style:{transform:a,...g}={},...T}=e,D=Se();if(!o)return null;const b=v*2,f=b/2,x=i/2*(c/-8+1),F=l/2*c/4,[$,N]=r.split("-"),X=it.isRTL(o),M=!!m,K=$==="top"||$==="bottom",y=p&&N==="end"?"bottom":"top";let H=p&&N==="end"?"right":"left";p&&X&&(H=N==="end"?"left":"right");const q=(s==null?void 0:s.x)!=null?p||s.x:"",B=(s==null?void 0:s.y)!=null?p||s.y:"",E=m||"M0,0"+(" H"+i)+(" L"+(i-x)+","+(l-F))+(" Q"+i/2+","+l+" "+x+","+(l-F))+" Z",A={top:M?"rotate(180deg)":"",left:M?"rotate(90deg)":"rotate(-90deg)",bottom:M?"":"rotate(180deg)",right:M?"rotate(-90deg)":"rotate(90deg)"}[$];return u.createElement("svg",se({},T,{"aria-hidden":!0,ref:n,width:M?i:i+b,height:i,viewBox:"0 0 "+i+" "+(l>i?l:i),style:{position:"absolute",pointerEvents:"none",[H]:q,[y]:B,[$]:K||M?"100%":"calc(100% - "+b/2+"px)",transform:""+A+(a??""),...g}}),b>0&&u.createElement("path",{clipPath:"url(#"+D+")",fill:"none",stroke:d,strokeWidth:b+(m?0:1),d:E}),u.createElement("path",{stroke:b&&!m?T.fill:"none",d:E}),u.createElement("clipPath",{id:D},u.createElement("rect",{x:-f,y:f*(M?-1:1),width:i+b,height:i})))});function Wt(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const Ht=u.createContext(null),qt=u.createContext(null),ze=()=>{var t;return((t=u.useContext(Ht))==null?void 0:t.id)||null},Ce=()=>u.useContext(qt);function de(t){return"data-floating-ui-"+t}function he(t){const e=u.useRef(t);return Y(()=>{e.current=t}),e}function Ut(t,e){var n;let r=[],o=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;o;){const s=t.find(i=>i.id===o);o=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function oe(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var l;return o.parentId===i.id&&((l=o.context)==null?void 0:l.open)})}),n=n.concat(r);return n}let Q=new WeakMap,ae=new WeakSet,ue={},ye=0;const Yt=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,et=t=>t&&(t.host||et(t.parentNode)),jt=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=et(n);return t.contains(r)?r:null}).filter(n=>n!=null);function Xt(t,e,n,r){const o="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,i=jt(e,t),l=new Set,c=new Set(i),v=[];ue[o]||(ue[o]=new WeakMap);const p=ue[o];i.forEach(d),m(e),l.clear();function d(a){!a||l.has(a)||(l.add(a),a.parentNode&&d(a.parentNode))}function m(a){!a||c.has(a)||[].forEach.call(a.children,g=>{if(Ue(g)!=="script")if(l.has(g))m(g);else{const T=s?g.getAttribute(s):null,D=T!==null&&T!=="false",b=(Q.get(g)||0)+1,f=(p.get(g)||0)+1;Q.set(g,b),p.set(g,f),v.push(g),b===1&&D&&ae.add(g),f===1&&g.setAttribute(o,""),!D&&s&&g.setAttribute(s,"true")}})}return ye++,()=>{v.forEach(a=>{const g=(Q.get(a)||0)-1,T=(p.get(a)||0)-1;Q.set(a,g),p.set(a,T),g||(!ae.has(a)&&s&&a.removeAttribute(s),ae.delete(a)),T||a.removeAttribute(o)}),ye--,ye||(Q=new WeakMap,Q=new WeakMap,ae=new WeakSet,ue={})}}function Ne(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=U(t[0]).body;return Xt(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const pe=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tt(t,e){const n=Te(t,pe());e==="prev"&&n.reverse();const r=n.indexOf(z(U(t)));return n.slice(r+1)[0]}function Gt(){return tt(document.body,"next")}function Zt(){return tt(document.body,"prev")}function Me(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!V(n,r)}const nt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Jt;function Le(t){t.key==="Tab"&&(t.target,clearTimeout(Jt))}const _e=u.forwardRef(function(e,n){const[r,o]=u.useState();Y(()=>(dt()&&o("button"),document.addEventListener("keydown",Le),()=>{document.removeEventListener("keydown",Le)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[de("focus-guard")]:"",style:nt};return u.createElement("span",se({},e,s))}),Qt=u.createContext(null),zt=()=>u.useContext(Qt),Ke=20;let J=[];function Ee(t){J=J.filter(n=>n.isConnected);let e=t;if(!(!e||Ue(e)==="body")){if(!Lt(e,pe())){const n=Te(e,pe())[0];n&&(e=n)}J.push(e),J.length>Ke&&(J=J.slice(-Ke))}}function $e(){return J.slice().reverse().find(t=>t.isConnected)}const en=u.forwardRef(function(e,n){return u.createElement("button",se({},e,{type:"button",ref:n,tabIndex:-1,style:nt}))});function cn(t){const{context:e,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:i=0,returnFocus:l=!0,modal:c=!0,visuallyHiddenDismiss:v=!1,closeOnFocusOut:p=!0}=t,{open:d,refs:m,nodeId:a,onOpenChange:g,events:T,dataRef:D,elements:{domReference:b,floating:f}}=e,x=typeof i=="number"&&i<0,F=mt(b)&&x,$=Yt()?s:!0,N=he(o),X=he(i),M=he(l),K=Ce(),y=zt(),H=u.useRef(null),q=u.useRef(null),B=u.useRef(!1),E=u.useRef(!1),A=y!=null,S=u.useCallback(function(R){return R===void 0&&(R=f),R?Te(R,pe()):[]},[f]),k=u.useCallback(R=>{const w=S(R);return N.current.map(h=>b&&h==="reference"?b:f&&h==="floating"?f:w).filter(Boolean).flat()},[b,f,N,S]);u.useEffect(()=>{if(r||!c)return;function R(h){if(h.key==="Tab"){V(f,z(U(f)))&&S().length===0&&!F&&me(h);const I=k(),L=ee(h);N.current[0]==="reference"&&L===b&&(me(h),h.shiftKey?Z(I[I.length-1]):Z(I[1])),N.current[1]==="floating"&&L===f&&h.shiftKey&&(me(h),Z(I[0]))}}const w=U(f);return w.addEventListener("keydown",R),()=>{w.removeEventListener("keydown",R)}},[r,b,f,c,N,F,S,k]),u.useEffect(()=>{if(r||!p)return;function R(){E.current=!0,setTimeout(()=>{E.current=!1})}function w(h){const I=h.relatedTarget;queueMicrotask(()=>{const L=!(V(b,I)||V(f,I)||V(I,f)||V(y==null?void 0:y.portalNode,I)||I!=null&&I.hasAttribute(de("focus-guard"))||K&&(oe(K.nodesRef.current,a).find(P=>{var O,_;return V((O=P.context)==null?void 0:O.elements.floating,I)||V((_=P.context)==null?void 0:_.elements.domReference,I)})||Ut(K.nodesRef.current,a).find(P=>{var O,_;return((O=P.context)==null?void 0:O.elements.floating)===I||((_=P.context)==null?void 0:_.elements.domReference)===I})));I&&L&&!E.current&&I!==$e()&&(B.current=!0,g(!1,h))})}if(f&&ie(b))return b.addEventListener("focusout",w),b.addEventListener("pointerdown",R),!c&&f.addEventListener("focusout",w),()=>{b.removeEventListener("focusout",w),b.removeEventListener("pointerdown",R),!c&&f.removeEventListener("focusout",w)}},[r,b,f,c,a,K,y,g,p]),u.useEffect(()=>{var R;if(r)return;const w=Array.from((y==null||(R=y.portalNode)==null?void 0:R.querySelectorAll("["+de("portal")+"]"))||[]);if(f){const h=[f,...w,H.current,q.current,N.current.includes("reference")||F?b:null].filter(L=>L!=null),I=c||F?Ne(h,$,!$):Ne(h);return()=>{I()}}},[r,b,f,c,N,y,F,$]),Y(()=>{if(r||!f)return;const R=U(f),w=z(R);queueMicrotask(()=>{const h=k(f),I=X.current,L=(typeof I=="number"?h[I]:I.current)||f,P=V(f,w);!x&&!P&&d&&Z(L,{preventScroll:L===f})})},[r,d,f,x,k,X]),Y(()=>{if(r||!f)return;let R=!1;const w=U(f),h=z(w);let L=D.current.openEvent;Ee(h);function P(O){let{open:_,reason:re,event:j,nested:ve}=O;_&&(L=j),re==="escape-key"&&m.domReference.current&&Ee(m.domReference.current),re==="hover"&&j.type==="mouseleave"&&(B.current=!0),re==="outside-press"&&(ve?(B.current=!1,R=!0):B.current=!(ct(j)||ft(j)))}return T.on("openchange",P),()=>{T.off("openchange",P);const O=z(w),_=V(f,O)||K&&oe(K.nodesRef.current,a).some(ve=>{var Ie;return V((Ie=ve.context)==null?void 0:Ie.elements.floating,O)});(_||L&&["click","mousedown"].includes(L.type))&&m.domReference.current&&Ee(m.domReference.current);const j=$e();M.current&&!B.current&&ie(j)&&(!(j!==O&&O!==w.body)||_)&&Z(j,{cancelPrevious:!1,preventScroll:R})}},[r,f,M,D,m,T,K,a]),Y(()=>{if(!(r||!y))return y.setFocusManagerState({modal:c,closeOnFocusOut:p,open:d,onOpenChange:g,refs:m}),()=>{y.setFocusManagerState(null)}},[r,y,c,d,g,m,p]),Y(()=>{if(r||!f||typeof MutationObserver!="function"||x)return;const R=()=>{const h=f.getAttribute("tabindex");N.current.includes("floating")||z(U(f))!==m.domReference.current&&S().length===0?h!=="0"&&f.setAttribute("tabindex","0"):h!=="-1"&&f.setAttribute("tabindex","-1")};R();const w=new MutationObserver(R);return w.observe(f,{childList:!0,subtree:!0,attributes:!0}),()=>{w.disconnect()}},[r,f,m,N,S,x]);function C(R){return r||!v||!c?null:u.createElement(en,{ref:R==="start"?H:q,onClick:w=>g(!1,w.nativeEvent)},typeof v=="string"?v:"Dismiss")}const G=!r&&$&&(A||c);return u.createElement(u.Fragment,null,G&&u.createElement(_e,{"data-type":"inside",ref:y==null?void 0:y.beforeInsideRef,onFocus:R=>{if(c){const h=k();Z(o[0]==="reference"?h[0]:h[h.length-1])}else if(y!=null&&y.preserveTabOrder&&y.portalNode)if(B.current=!1,Me(R,y.portalNode)){const h=Gt()||b;h==null||h.focus()}else{var w;(w=y.beforeOutsideRef.current)==null||w.focus()}}}),!F&&C("start"),n,C("end"),G&&u.createElement(_e,{"data-type":"inside",ref:y==null?void 0:y.afterInsideRef,onFocus:R=>{if(c)Z(k()[0]);else if(y!=null&&y.preserveTabOrder&&y.portalNode)if(p&&(B.current=!0),Me(R,y.portalNode)){const h=Zt()||b;h==null||h.focus()}else{var w;(w=y.afterOutsideRef.current)==null||w.focus()}}}))}function Be(t){return ie(t.target)&&t.target.tagName==="BUTTON"}function Ve(t){return je(t)}function fn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=t,{enabled:i=!0,event:l="click",toggle:c=!0,ignoreMouse:v=!1,keyboardHandlers:p=!0}=e,d=u.useRef(),m=u.useRef(!1);return u.useMemo(()=>i?{reference:{onPointerDown(a){d.current=a.pointerType},onMouseDown(a){a.button===0&&(Pe(d.current,!0)&&v||l!=="click"&&(n&&c&&(!o.current.openEvent||o.current.openEvent.type==="mousedown")?r(!1,a.nativeEvent,"click"):(a.preventDefault(),r(!0,a.nativeEvent,"click"))))},onClick(a){if(l==="mousedown"&&d.current){d.current=void 0;return}Pe(d.current,!0)&&v||(n&&c&&(!o.current.openEvent||o.current.openEvent.type==="click")?r(!1,a.nativeEvent,"click"):r(!0,a.nativeEvent,"click"))},onKeyDown(a){d.current=void 0,!(a.defaultPrevented||!p||Be(a))&&(a.key===" "&&!Ve(s)&&(a.preventDefault(),m.current=!0),a.key==="Enter"&&r(!(n&&c),a.nativeEvent,"click"))},onKeyUp(a){a.defaultPrevented||!p||Be(a)||Ve(s)||a.key===" "&&m.current&&(m.current=!1,r(!(n&&c),a.nativeEvent,"click"))}}}:{},[i,o,l,v,p,s,c,n,r])}const tn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},nn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},We=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function dn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:{reference:o,domReference:s,floating:i},dataRef:l}=t,{enabled:c=!0,escapeKey:v=!0,outsidePress:p=!0,outsidePressEvent:d="pointerdown",referencePress:m=!1,referencePressEvent:a="pointerdown",ancestorScroll:g=!1,bubbles:T,capture:D}=e,b=Ce(),f=te(typeof p=="function"?p:()=>!1),x=typeof p=="function"?f:p,F=u.useRef(!1),$=u.useRef(!1),{escapeKey:N,outsidePress:X}=We(T),{escapeKey:M,outsidePress:K}=We(D),y=te(E=>{var A;if(!n||!c||!v||E.key!=="Escape")return;const S=(A=l.current.floatingContext)==null?void 0:A.nodeId,k=b?oe(b.nodesRef.current,S):[];if(!N&&(E.stopPropagation(),k.length>0)){let C=!0;if(k.forEach(G=>{var R;if((R=G.context)!=null&&R.open&&!G.context.dataRef.current.__escapeKeyBubbles){C=!1;return}}),!C)return}r(!1,vt(E)?E.nativeEvent:E,"escape-key")}),H=te(E=>{var A;const S=()=>{var k;y(E),(k=ee(E))==null||k.removeEventListener("keydown",S)};(A=ee(E))==null||A.addEventListener("keydown",S)}),q=te(E=>{var A;const S=F.current;F.current=!1;const k=$.current;if($.current=!1,d==="click"&&k||S||typeof x=="function"&&!x(E))return;const C=ee(E),G="["+de("inert")+"]",R=U(i).querySelectorAll(G);let w=W(C)?C:null;for(;w&&!ke(w);){const P=at(w);if(ke(P)||!W(P))break;w=P}if(R.length&&W(C)&&!bt(C)&&!V(C,i)&&Array.from(R).every(P=>!V(w,P)))return;if(ie(C)&&i){const P=C.clientWidth>0&&C.scrollWidth>C.clientWidth,O=C.clientHeight>0&&C.scrollHeight>C.clientHeight;let _=O&&E.offsetX>C.clientWidth;if(O&&ut(C).direction==="rtl"&&(_=E.offsetX<=C.offsetWidth-C.clientWidth),_||P&&E.offsetY>C.clientHeight)return}const h=(A=l.current.floatingContext)==null?void 0:A.nodeId,I=b&&oe(b.nodesRef.current,h).some(P=>{var O;return ge(E,(O=P.context)==null?void 0:O.elements.floating)});if(ge(E,i)||ge(E,s)||I)return;const L=b?oe(b.nodesRef.current,h):[];if(L.length>0){let P=!0;if(L.forEach(O=>{var _;if((_=O.context)!=null&&_.open&&!O.context.dataRef.current.__outsidePressBubbles){P=!1;return}}),!P)return}r(!1,E,"outside-press")}),B=te(E=>{var A;const S=()=>{var k;q(E),(k=ee(E))==null||k.removeEventListener(d,S)};(A=ee(E))==null||A.addEventListener(d,S)});return u.useEffect(()=>{if(!n||!c)return;l.current.__escapeKeyBubbles=N,l.current.__outsidePressBubbles=X;function E(k){r(!1,k,"ancestor-scroll")}const A=U(i);v&&A.addEventListener("keydown",M?H:y,M),x&&A.addEventListener(d,K?B:q,K);let S=[];return g&&(W(s)&&(S=be(s)),W(i)&&(S=S.concat(be(i))),!W(o)&&o&&o.contextElement&&(S=S.concat(be(o.contextElement)))),S=S.filter(k=>{var C;return k!==((C=A.defaultView)==null?void 0:C.visualViewport)}),S.forEach(k=>{k.addEventListener("scroll",E,{passive:!0})}),()=>{v&&A.removeEventListener("keydown",M?H:y,M),x&&A.removeEventListener(d,K?B:q,K),S.forEach(k=>{k.removeEventListener("scroll",E)})}},[l,i,s,o,v,x,d,n,r,g,c,N,X,y,M,H,q,K,B]),u.useEffect(()=>{F.current=!1},[x,d]),u.useMemo(()=>c?{reference:{onKeyDown:y,[tn[a]]:E=>{m&&r(!1,E.nativeEvent,"reference-press")}},floating:{onKeyDown:y,onMouseDown(){$.current=!0},onMouseUp(){$.current=!0},[nn[d]]:()=>{F.current=!0}}}:{},[c,m,d,a,r,y])}function rn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=Se(),s=u.useRef({}),[i]=u.useState(()=>Wt()),l=ze()!=null,[c,v]=u.useState(r.reference),p=te((a,g,T)=>{s.current.openEvent=a?g:void 0,i.emit("openchange",{open:a,event:g,reason:T,nested:l}),n==null||n(a,g,T)}),d=u.useMemo(()=>({setPositionReference:v}),[]),m=u.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return u.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:m,events:i,floatingId:o,refs:d}),[e,p,m,i,o,d])}function pn(t){t===void 0&&(t={});const{nodeId:e}=t,n=rn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=u.useState(null),[l,c]=u.useState(null),p=(o==null?void 0:o.reference)||s,d=u.useRef(null),m=Ce();Y(()=>{p&&(d.current=p)},[p]);const a=st({...t,elements:{...o,...l&&{reference:l}}}),g=u.useCallback(x=>{const F=W(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;c(F),a.refs.setReference(F)},[a.refs]),T=u.useCallback(x=>{(W(x)||x===null)&&(d.current=x,i(x)),(W(a.refs.reference.current)||a.refs.reference.current===null||x!==null&&!W(x))&&a.refs.setReference(x)},[a.refs]),D=u.useMemo(()=>({...a.refs,setReference:T,setPositionReference:g,domReference:d}),[a.refs,T,g]),b=u.useMemo(()=>({...a.elements,domReference:p}),[a.elements,p]),f=u.useMemo(()=>({...a,...r,refs:D,elements:b,nodeId:e}),[a,D,b,e,r]);return Y(()=>{r.dataRef.current.floatingContext=f;const x=m==null?void 0:m.nodesRef.current.find(F=>F.id===e);x&&(x.context=f)}),u.useMemo(()=>({...a,context:f,refs:D,elements:b}),[a,D,b,f])}const He="active",qe="selected";function Re(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[He]:i,[qe]:l,...c}=t;s=c}return{...n==="floating"&&{tabIndex:-1},...s,...e.map(i=>{const l=i?i[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((i,l)=>(l&&Object.entries(l).forEach(c=>{let[v,p]=c;if(!(o&&[He,qe].includes(v)))if(v.indexOf("on")===0){if(r.has(v)||r.set(v,[]),typeof p=="function"){var d;(d=r.get(v))==null||d.push(p),i[v]=function(){for(var m,a=arguments.length,g=new Array(a),T=0;T<a;T++)g[T]=arguments[T];return(m=r.get(v))==null?void 0:m.map(D=>D(...g)).find(D=>D!==void 0)}}}else i[v]=p}),i),{})}}function vn(t){t===void 0&&(t=[]);const e=t,n=u.useCallback(s=>Re(s,t,"reference"),e),r=u.useCallback(s=>Re(s,t,"floating"),e),o=u.useCallback(s=>Re(s,t,"item"),t.map(s=>s==null?void 0:s.item));return u.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:o}),[n,r,o])}const on=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function bn(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,l=(n=on.get(i))!=null?n:i,c=Se(),p=ze()!=null;return u.useMemo(()=>{if(!s)return{};const d={id:o,...l&&{role:l}};return l==="tooltip"||i==="label"?{reference:{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0},floating:d}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":l==="alertdialog"?"dialog":l,"aria-controls":r?o:void 0,...l==="listbox"&&{role:"combobox"},...l==="menu"&&{id:c},...l==="menu"&&p&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},floating:{...d,...l==="menu"&&{"aria-labelledby":c}},item(m){let{active:a,selected:g}=m;const T={role:"option",...a&&{id:o+"-option"}};switch(i){case"select":return{...T,"aria-selected":a&&g};case"combobox":return{...T,...a&&{"aria-selected":!0}}}return{}}}},[s,i,l,r,o,c,p])}export{cn as F,fn as a,dn as b,bn as c,vn as d,ln as e,pn as u};
